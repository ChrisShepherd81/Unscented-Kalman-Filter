/*
 * SensorConfig.cpp
 *
 *  Created on: 19.04.2017
 *      Author: christian@inf-schaefer.de
 */

#include "SensorConfig.hpp"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
SensorConfig::SensorConfig(std::initializer_list<double> std_errors, size_t stateLength, bool isLinear) :
  isLinear_(isLinear)
{
  H_ = Eigen::MatrixXd::Zero(std_errors.size(), stateLength);
  R_ =  Eigen::MatrixXd::Zero(std_errors.size(), std_errors.size());
  size_t idx = 0;
  for(auto err : std_errors)
  {
    H_(idx,idx) = 1.0;
    R_(idx,idx) = err*err;
    ++idx;
  }
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
SensorConfig::SensorConfig() {
  // TODO Auto-generated destructor stub
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Eigen::MatrixXd& SensorConfig::GetH()
{
  if(isLinear_)
    return this->H_;
  else
    throw std::logic_error("non-linear transformation function needed.");
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Eigen::MatrixXd& SensorConfig::GetR()
{
  return this->R_;
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
